+++
title = "java 静态变量生命周期（类生命周期）"
description = ""
tags = [
    "静态变量"
]
date = "2019-01-02"
categories = [
	"Java"
]
+++
# java 静态变量生命周期（类生命周期）

## Static：

- 加载：java虚拟机在加载类的过程中为静态变量分配内存。
- 类变量：static变量在内存中只有一个，存放在方法区，属于类变量，被所有实例所共享
- 销毁：类被卸载时，静态变量被销毁，并释放内存空间。static变量的生命周期取决于类的生命周期

## 类初始化顺序：

- 静态变量、静态代码块初始化
- 构造函数
- 自定义构造函数
结论：想要用static存一个变量，使得下次程序运行时还能使用上次的值是不可行的。因为静态变量生命周期虽然长（就是类的生命周期），但是当程序执行完，也就是该类的所有对象都已经被回收，或者加载类的ClassLoader已经被回收，那么该类就会从jvm的方法区卸载，即生命期终止。

更进一步来说，static变量终究是存在jvm的内存中的，jvm下次重新运行时，肯定会清空里边上次运行的内容，包括方法区、常量区的内容。

要实现某些变量在程序多次运行时都可以读取，那么必须要将变量存下来，即存到本地文件中。常用的数据存取格式：XML、JSON、Propertities类（类似map的键值对）等